<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Gestion Villa</title>
    <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body>
    <div class="admin-container">
        <header>
            <h1>üè° Administration - Villa de Prestige</h1>
            <a href="/" class="btn-preview">Voir le site</a>
        </header>

        <form id="villaForm" method="POST" action="/admin/save">
            <div class="section">
                <h2>Informations Principales</h2>
                
                <div class="form-group">
                    <label>R√©f√©rence</label>
                    <input type="text" name="reference" value="{{ villa.reference if villa else '' }}" required>
                </div>

                <div class="form-group">
                    <label>Titre</label>
                    <div class="input-with-ai">
                        <input type="text" name="title" id="title" value="{{ villa.title if villa else '' }}" required>
                        <button type="button" class="btn-ai" onclick="enhanceField('title')">‚ú® AI</button>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Prix (‚Ç¨)</label>
                        <input type="number" name="price" value="{{ villa.price if villa else '' }}" required>
                    </div>
                    <div class="form-group">
                        <label>Localisation</label>
                        <input type="text" name="location" value="{{ villa.location if villa else '' }}" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Distance de la ville</label>
                    <input type="text" name="distance_city" value="{{ villa.distance_city if villa else '' }}">
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <div class="input-with-ai">
                        <textarea name="description" id="description" rows="6" required>{{ villa.description if villa else '' }}</textarea>
                        <button type="button" class="btn-ai" onclick="enhanceField('description')">‚ú® AI</button>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>Caract√©ristiques</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Surface terrain (m¬≤)</label>
                        <input type="number" name="terrain_area" value="{{ villa.terrain_area if villa else '' }}">
                    </div>
                    <div class="form-group">
                        <label>Surface construite (m¬≤)</label>
                        <input type="number" name="built_area" value="{{ villa.built_area if villa else '' }}">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Nombre de chambres</label>
                        <input type="number" name="bedrooms" value="{{ villa.bedrooms if villa else '' }}">
                    </div>
                    <div class="form-group">
                        <label>Taille piscine</label>
                        <input type="text" name="pool_size" value="{{ villa.pool_size if villa else '' }}">
                    </div>
                </div>

                <div class="form-group">
                    <label>√âquipements (un par ligne)</label>
                    <textarea name="features" rows="6">{{ villa.features if villa else '' }}</textarea>
                </div>
            </div>

            <div class="section">
                <h2>Photos</h2>
                <div id="imageGallery" class="image-gallery">
                    {% if villa and villa.get_images_list() %}
                        {% for img in villa.get_images_list() %}
                        <div class="image-item" data-filename="{{ img }}">
                            <img src="/static/uploads/{{ img }}" alt="Villa">
                            <button type="button" class="btn-delete" onclick="deleteImage('{{ img }}')">√ó</button>
                        </div>
                        {% endfor %}
                    {% endif %}
                </div>
                <div class="upload-area">
                    <input type="file" id="imageUpload" accept="image/*" multiple onchange="uploadImages(this)">
                    <label for="imageUpload" class="upload-label">
                        üì∏ Cliquez pour ajouter des photos
                    </label>
                </div>
            </div>

            <div class="section">
                <h2>D√©tails Suppl√©mentaires</h2>
                
                <div class="form-group">
                    <label>√âquipement & Confort</label>
                    <textarea name="equipment" rows="6">{{ villa.equipment if villa else '' }}</textarea>
                </div>

                <div class="form-group">
                    <label>Exploitation Commerciale</label>
                    <textarea name="business_info" rows="6">{{ villa.business_info if villa else '' }}</textarea>
                </div>

                <div class="form-group">
                    <label>Atouts Investisseurs</label>
                    <textarea name="investment_benefits" rows="6">{{ villa.investment_benefits if villa else '' }}</textarea>
                </div>

                <div class="form-group">
                    <label>Documents Disponibles</label>
                    <textarea name="documents" rows="4">{{ villa.documents if villa else '' }}</textarea>
                </div>
            </div>

            <div class="section">
                <h2>Contact</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>T√©l√©phone</label>
                        <input type="text" name="contact_phone" value="{{ villa.contact_phone if villa else '' }}">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="contact_email" value="{{ villa.contact_email if villa else '' }}">
                    </div>
                </div>

                <div class="form-group">
                    <label>Site Web</label>
                    <input type="url" name="contact_website" value="{{ villa.contact_website if villa else '' }}">
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-save">üíæ Enregistrer</button>
            </div>
        </form>
    </div>

    <script src="/static/js/admin.js"></script>
</body>
</html>
